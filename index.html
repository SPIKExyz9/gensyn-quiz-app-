<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gensyn X SpikeXYZ Quiz (Mobile)</title>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
<style>
  body { margin:0; font-family:'Orbitron',sans-serif; background:#0f0c29; overflow-x:hidden; color:white; }
  canvas.background { position: fixed; top:0; left:0; z-index:-1; }
  .container { max-width:95%; margin:auto; padding:10px; text-align:center; }
  h1,h2 { text-shadow:0 0 10px #0ff; font-size:1.8em; }
  .logo { font-size:1.4em; font-weight:bold; margin-bottom:10px; color:#ff00ff; text-shadow:0 0 10px #ff00ff; }
  .question-box, .score-box { background: rgba(255,255,255,0.05); padding:15px; margin:15px 0; border-radius:15px; }
  .options button, .share-buttons button, .reset-button, .replay-button {
    display:block; width:100%; margin:10px 0; padding:10px; font-size:1em; border-radius:10px; border:none; font-weight:bold; cursor:pointer;
    background: linear-gradient(90deg,#ff00ff,#00ffff); color:#000; text-shadow:0 0 3px #fff; transition:0.2s;
  }
  .options button:hover, .share-buttons button:hover, .reset-button:hover, .replay-button:hover { transform:scale(1.05); }
  .share-buttons button, .reset-button, .replay-button { width:auto; display:inline-block; margin:3px 5px; font-size:0.9em; padding:8px; }
  .leaderboard { margin-top:10px; text-align:left; font-size:0.9em; }
  .leaderboard-item { opacity:0; transform:translateX(-50px); transition:all 0.4s ease; margin:2px 0; }
  .rank-0 { color:#FFD700; font-weight:bold; }
  .rank-1 { color:#C0C0C0; font-weight:bold; }
  .rank-2 { color:#CD7F32; font-weight:bold; }
</style>
</head>
<body>
<canvas class="background" id="bgCanvas"></canvas>
<div id="root"></div>
<audio id="correct-sound" src="https://freesound.org/data/previews/337/337049_3233763-lq.mp3"></audio>
<audio id="wrong-sound" src="https://freesound.org/data/previews/156/156031_2737820-lq.mp3"></audio>

<script type="text/babel">
const { useState, useRef, useEffect } = React;

// --- Same quizData as before ---
const quizData = [
  { q:"What is Gensyn primarily focused on?", options:["Gaming","Machine Intelligence Network","Social Media","E-commerce"], answer:1 },
  { q:"What does RL in Gensyn RL Swarm stand for?", options:["Random Learning","Reinforcement Learning","Real-time Logic","Recursive Loop"], answer:1 },
  { q:"Which type of models does Gensyn currently train?", options:["0.5 parameter models","1.5 parameter models","10 parameter models","100 parameter models"], answer:1 },
  { q:"How can users contribute to Gensyn?", options:["Running nodes","Posting memes","Watching videos","Writing articles"], answer:0 },
  { q:"Which GPU is recommended for high-performance node setup?", options:["RTX 2060","NVIDIA L40S","GTX 1050","AMD RX 580"], answer:1 },
  { q:"What role does the Monad node play?", options:["Content creation","Validation and verification","Social networking","Music streaming"], answer:1 },
  { q:"What is a Gensyn node?", options:["A hardware device","Software running computations","A gaming console","A web browser"], answer:1 },
  { q:"How are rewards distributed in Gensyn?", options:["Randomly","Based on node contribution","Daily login bonuses","By community votes"], answer:1 },
  { q:"What is Judge game in Gensyn?", options:["A quiz","Automated betting system for nodes","A multiplayer video game","A puzzle challenge"], answer:1 },
  { q:"How do users claim their AGI roles?", options:["By paying a fee","By running specific nodes","By sending a request email","By completing quizzes"], answer:1 },
  { q:"Which of these is required for running a Gensyn node?", options:["Internet connection","Smartphone only","Browser","Printer"], answer:0 },
  { q:"Gensynâ€™s content creator reward is distributed at:", options:["Daily","TGE (Token Generation Event)","Weekly","Monthly"], answer:1 },
  { q:"Which parameter model is considered smaller in Gensyn?", options:["1.5 parameter","0.5 parameter","5 parameter","10 parameter"], answer:1 },
  { q:"What is the function of RL Swarm?", options:["AI training","Social media posting","Music streaming","Web hosting"], answer:0 },
  { q:"Which platform is often used for monitoring Gensyn nodes?", options:["Discord","Instagram","TikTok","YouTube"], answer:0 },
  { q:"How can users share their Gensyn quiz results?", options:["SMS","Telegram, Twitter, WhatsApp","Email only","None"], answer:1 },
  { q:"The primary network of Gensyn is designed for:", options:["Human-to-human communication","Machine intelligence","Stock trading","Cloud storage"], answer:1 },
  { q:"What is SpikeXYZ in context with Gensyn quiz?", options:["A competitor","A collaborative project/logo","A GPU brand","A blockchain token"], answer:1 },
  { q:"What happens if a node is offline in Gensyn?", options:["It still earns rewards","It temporarily stops contributing","It deletes data","It becomes a Validator"], answer:1 },
  { q:"How are nodes identified in the Gensyn network?", options:["Username","Unique node ID","Email","IP address"], answer:1 },
  { q:"What does 'TGE' stand for?", options:["Token Generation Event","Total Gensyn Earnings","Transaction Global Exchange","Token Growth Estimate"], answer:0 },
  { q:"Which of the following is a feature of Gensyn nodes?", options:["Automatic participation in Judge game","Free GPU rental","Movie streaming","Blogging"], answer:0 },
  { q:"Which type of AGI can be obtained by running advanced nodes?", options:["Beginner AGI","Advanced AGI","Intermediate AGI","Trial AGI"], answer:1 },
  { q:"Gensyn is most closely related to:", options:["Artificial Intelligence","Cryptocurrency trading","Social networking","Cloud storage"], answer:0 },
  { q:"What is required to earn content creator rewards in Gensyn?", options:["Upload videos","Contribute AI data or content","Post memes","Share links"], answer:1 },
];

function QuizApp(){
  const [currentQ,setCurrentQ] = useState(0);
  const [score,setScore] = useState(0);
  const [showScore,setShowScore] = useState(false);
  const [selected,setSelected] = useState(null);
  const [leaderboard,setLeaderboard] = useState(JSON.parse(localStorage.getItem("gensynLeaderboard")||"[]"));
  const [sessionsPlayed,setSessionsPlayed] = useState(parseInt(localStorage.getItem("gensynSessions")||0));
  const [totalScore,setTotalScore] = useState(parseInt(localStorage.getItem("gensynTotalScore")||0));
  const canvasRef = useRef(null);
  const correctSound = document.getElementById("correct-sound");
  const wrongSound = document.getElementById("wrong-sound");

  const handleOption=(index)=>{
    setSelected(index);
    const correct=index===quizData[currentQ].answer;
    if(correct){ setScore(score+1); correctSound.play(); triggerConfetti(); } 
    else{ wrongSound.play(); }
    setTimeout(()=>{
      if(currentQ+1<quizData.length){ setCurrentQ(currentQ+1); setSelected(null); }
      else{ setShowScore(true); updateLeaderboard(score+(correct?1:0)); updateStats(score+(correct?1:0)); }
    },400);
  };

  const updateLeaderboard=(finalScore)=>{
    const name="Player"+Math.floor(Math.random()*1000);
    const newEntry={name,score:finalScore};
    const newBoard=[...leaderboard,newEntry].sort((a,b)=>b.score-a.score).slice(0,10);
    setLeaderboard(newBoard);
    localStorage.setItem("gensynLeaderboard",JSON.stringify(newBoard));
    // Trigger slide animation
    setTimeout(()=>{document.querySelectorAll('.leaderboard-item').forEach(el=>el.style.transform='translateX(0)');},50);
  };

  const updateStats=(finalScore)=>{
    const newSessions=sessionsPlayed+1;
    const newTotal=totalScore+finalScore;
    setSessionsPlayed(newSessions);
    setTotalScore(newTotal);
    localStorage.setItem("gensynSessions",newSessions);
    localStorage.setItem("gensynTotalScore",newTotal);
  };

  const shareResult=()=>{ 
    const url=encodeURIComponent("https://gensyn-spikexyz-quiz.com");
    const text=encodeURIComponent(`I scored ${score} in Gensyn X SpikeXYZ Quiz! My winning rate is ${((totalScore+score)/(sessionsPlayed+1)/quizData.length*100).toFixed(2)}%! Try it!`);
    window.open(`https://t.me/share/url?url=${url}&text=${text}`,"_blank");
  };

  const resetStats=()=>{
    if(confirm("Reset leaderboard & stats?")){
      localStorage.removeItem("gensynLeaderboard");
      localStorage.removeItem("gensynSessions");
      localStorage.removeItem("gensynTotalScore");
      setLeaderboard([]); setSessionsPlayed(0); setTotalScore(0); setScore(0); setCurrentQ(0); setShowScore(false); setSelected(null);
    }
  };

  const replayQuiz=()=>{ setScore(0); setCurrentQ(0); setShowScore(false); setSelected(null); };

  const triggerConfetti=()=>{ 
    const canvas=canvasRef.current; 
    if(!canvas) return; 
    const ctx=canvas.getContext("2d"); 
    const w=canvas.width=window.innerWidth; 
    const h=canvas.height=window.innerHeight; 
    const particles=[]; 
    for(let i=0;i<50;i++){ particles.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*3+1,dx:(Math.random()-0.5)*3,dy:(Math.random()-0.5)*3,color:`hsl(${Math.random()*360},100%,50%)`}); } 
    let frames=0; 
    function draw(){ ctx.clearRect(0,0,w,h); particles.forEach(p=>{ p.x+=p.dx; p.y+=p.dy; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=p.color; ctx.fill(); }); frames++; if(frames<40) requestAnimationFrame(draw); else ctx.clearRect(0,0,w,h); } 
    draw();
  };

  return(
    <div className="container">
      <canvas ref={canvasRef}></canvas>
      <div className="logo">Gensyn X SpikeXYZ</div>
      {!showScore ? (
        <div className="question-box">
          <h1>Question {currentQ+1}/{quizData.length}</h1>
          <p>{quizData[currentQ].q}</p>
          <div className="options">
            {quizData[currentQ].options.map((opt,i)=>(
              <button key={i} onClick={()=>handleOption(i)} style={{opacity:selected!==null && selected!==i?0.6:1}}>{opt}</button>
            ))}
          </div>
        </div>
      ):(
        <div className="score-box">
          <h1>Your Score: {score}/{quizData.length}</h1>
          <h2>Winning Rate: {((totalScore)/sessionsPlayed/quizData.length*100).toFixed(2) || 0}%</h2>
          <div className="share-buttons">
            <button onClick={shareResult} style={{background:"#00ffff"}}>Share on Telegram</button>
            <button onClick={()=>alert("Twitter share!") } style={{background:"#1DA1F2"}}>Share on Twitter</button>
            <button onClick={()=>alert("WhatsApp share!") } style={{background:"#25D366"}}>Share on WhatsApp</button>
          </div>
          <button className="replay-button" onClick={replayQuiz} style={{background:"#ffaa00"}}>Replay Quiz</button>
          <button className="reset-button" onClick={resetStats} style={{background:"#ff4444"}}>Reset Stats & Leaderboard</button>
          <div className="leaderboard">
            <h2>Leaderboard (Top 10)</h2>
            <div className="leaderboard-list">
              {leaderboard.map((p,i)=>(
                <p key={i} className={`leaderboard-item rank-${i}`} style={{transform:'translateX(-50px)'}}>
                  {i+1}. {p.name} - {p.score}
                </p>
              ))}
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// --- Background Animation (optimized) ---
function animateBackground(){
  const canvas = document.getElementById('bgCanvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const particles=[];
  for(let i=0;i<100;i++){
    particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.5+0.5,dx:(Math.random()-0.5)*1,dy:(Math.random()-0.5)*1,color:`hsl(${Math.random()*360},100%,50%)`});
  }
  function draw(){
    ctx.fillStyle='rgba(0,0,0,0.2)'; ctx.fillRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{ p.x+=p.dx; p.y+=p.dy; if(p.x<0||p.x>canvas.width)p.dx*=-1; if(p.y<0||p.y>canvas.height)p.dy*=-1; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=p.color; ctx.fill(); });
    requestAnimationFrame(draw);
  }
  draw();
}
animateBackground();

ReactDOM.createRoot(document.getElementById('root')).render(<QuizApp />);
</script>
</body>
</html>
